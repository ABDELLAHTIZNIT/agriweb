<script>
/* Fix: hamburger + overlay */
window.addEventListener('DOMContentLoaded', ()=>{
  const sidebar = document.getElementById('sidebar');
  const overlay = document.getElementById('overlay');
  const btn = document.querySelector('.menu-btn');

  function openMenu(){ sidebar.classList.add('active'); overlay.classList.add('active'); }
  function closeMenu(){ sidebar.classList.remove('active'); overlay.classList.remove('active'); }

  btn?.addEventListener('click', ()=> {
    if (sidebar.classList.contains('active')) closeMenu(); else openMenu();
  });
  overlay?.addEventListener('click', closeMenu);
  document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeMenu(); });
});
</script>

<body>

  <!-- Ø´Ø±ÙŠØ· Ø¹Ù„ÙˆÙŠ -->
  <div class="topbar">
    <button id="menuBtn" class="btn" style="padding:6px 10px;">â˜°</button>
    <h1 id="topbarTitle">AB AGRIWEB</h1>
    <button id="logoutBtn" class="btn" style="padding:6px 10px;">ğŸšª</button>
  </div>

  <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØµÙØ­Ø© -->
  <main class="content">
    <section id="dashboard" class="card">
      <h2>Bienvenue ğŸ‘‹</h2>
      <p>Tableau de bord principal de <b>AB AGRIWEB</b>.</p>
      <p>Choisissez une option dans le menu pour commencer.</p>
    </section>
  </main>

  <!-- Ù‚Ø§Ø¦Ù…Ø© Ø¬Ø§Ù†Ø¨ÙŠØ© -->
  <aside id="sidebar" class="card hidden" style="position:fixed;left:10px;top:70px;width:200px;padding:10px;background:#0b1220;">
    <button class="btn" onclick="navigate('home')">ğŸ  Accueil</button>
    <button class="btn" onclick="navigate('irrigation')">ğŸ’§ Irrigation</button>
    <button class="btn" onclick="navigate('traitement')">ğŸŒ¿ Traitement</button>
    <button class="btn" onclick="navigate('settings')">âš™ï¸ ParamÃ¨tres</button>
  </aside>

  <!-- JS -->
  <script type="module" src="assets/js/main.js"></script>

  <script>
    // ÙØªØ­ / ØºÙ„Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©
    const menuBtn = document.getElementById("menuBtn");
    const sidebar = document.getElementById("sidebar");
    const logoutBtn = document.getElementById("logoutBtn");

    menuBtn.addEventListener("click", () => {
      sidebar.classList.toggle("hidden");
    });

    logoutBtn.addEventListener("click", () => {
      localStorage.removeItem("ab_setup");
      alert("DÃ©connexion rÃ©ussie !");
      window.location.href = "index.html";
    });

    function navigate(page) {
      alert("FonctionnalitÃ© en cours : " + page);
    }
  </script>
</body>
</html>
