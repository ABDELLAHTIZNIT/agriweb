<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>AB AGRIWEB - Dashboard</title>
<style>
:root{
  --bg:#0f172a;
  --bg-soft:#020817;
  --panel:#0b1220;
  --text:#e2e8f0;
  --muted:#9ca3af;
  --accent:#22c55e;
  --border:#243046;
  --tile:#0c1526;
  --tileIcon:#0f1a2e;
}
body{
  margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:var(--bg);color:var(--text);
  transition:background .25s ease,color .25s ease;
}
header{
  display:flex;align-items:center;justify-content:space-between;
  background:var(--panel);padding:8px 12px;border-bottom:1px solid var(--border);
}
.left-head{display:flex;align-items:center;gap:8px}
.menu-btn{width:36px;height:36px;border-radius:10px;border:1px solid #111827;background:#020817;color:var(--text);font-size:20px;display:grid;place-items:center;cursor:pointer;}
.brand{display:flex;align-items:center;gap:8px}
#appTitleTop{font-weight:800;letter-spacing:.4px;color:var(--accent);font-size:15px;}
#appBadgeImg{height:22px;border-radius:6px;border:1px solid #1f2937;}
.sidebar{
  position:fixed;top:0;left:-260px;width:260px;height:100%;background:#020817;
  border-right:1px solid var(--border);transition:left .25s ease;
  padding-top:50px;display:flex;flex-direction:column;z-index:30;
}
.sidebar.open{left:0}
.sidebar a{display:flex;align-items:center;gap:8px;padding:8px 12px;margin:2px 8px;color:#cbd5e1;text-decoration:none;border-radius:9px;font-size:13px;}
.sidebar a:hover{background:#111827;color:#fff;}
.sidebar a.active{background:var(--accent);color:#020817;font-weight:700;}
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);opacity:0;pointer-events:none;transition:opacity .25s;z-index:25;}
.overlay.active{opacity:1;pointer-events:auto;}
main.content{padding:16px}
.card{background:var(--bg-soft);border:1px solid var(--border);border-radius:14px;padding:16px;margin-bottom:16px;}
.tile{display:flex;align-items:center;gap:10px;background:var(--tile);border-radius:12px;padding:10px 12px;border:1px solid #111827;cursor:pointer;}
.tile:hover{border-color:var(--accent);}
.tile .icon{width:32px;height:32px;display:grid;place-items:center;background:var(--tileIcon);border-radius:10px;border:1px solid #1f2a44;font-size:17px;}
.input,select{width:100%;max-width:320px;padding:8px 9px;border-radius:9px;border:1px solid #111827;background:#020817;color:#e5e7eb;font-size:12px;}
.btn{padding:7px 9px;border-radius:8px;border:1px solid var(--accent);background:transparent;color:var(--accent);cursor:pointer;font-size:12px;}
.btn:hover{background:var(--accent);color:#020817}
.btn.danger{border-color:#ef4444;color:#fca5a5;}
.btn.danger:hover{background:#ef4444;color:#020817;}
.label{display:block;margin-bottom:3px;font-size:10px;color:#9ca3af;}
.hint{font-size:11px;color:#9ca3af;margin-top:6px;}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:10px;}
</style>
</head>
<body>

<header>
  <div class="left-head">
    <button class="menu-btn" id="menuBtn">â˜°</button>
    <div class="brand">
      <div id="appTitleTop">AB AGRIWEB</div>
      <img id="appBadgeImg" class="hidden" alt="">
    </div>
  </div>
</header>

<!-- SIDEBAR -->
<aside class="sidebar" id="sidebar">
  <a href="#" id="nav-home" class="active">ğŸ  Accueil</a>
  <a href="#" id="nav-settings">âš™ï¸ ParamÃ¨tres</a>
  <a href="#" id="nav-theme">ğŸ¨ Fond</a>
  <a href="#" id="nav-logout">ğŸšª DÃ©connecter</a>
</aside>
<div class="overlay" id="overlay"></div>

<main class="content">
  <!-- Accueil -->
  <section id="page-home" class="card">
    <h2>Bienvenue ğŸ‘‹</h2>
    <p>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù€ <b>AB AGRIWEB</b>.</p>
  </section>

  <!-- PARAMÃˆTRES -->
  <section id="page-settings" class="card hidden">
    <h2>ParamÃ¨tres</h2>
    <div class="tile" id="tile-op">ğŸ‘¥ Gestion des utilisateurs</div>
    <div class="tile" id="tile-prof">ğŸ§© Profils</div>
    <div class="tile" id="tile-ref">ğŸ—‚ï¸ RÃ©fÃ©rentiels</div>
  </section>

  <!-- THEME / BACKGROUND -->
  <section id="page-theme" class="card hidden">
    <h2>Changer le fond de lâ€™application</h2>
    <div class="grid">
      <div>
        <label class="label">Choisir une image depuis lâ€™appareil</label>
        <input type="file" id="bgFile" accept="image/png,image/jpg,image/jpeg,image/gif" class="input">
      </div>
      <div>
        <label class="label">Ou via lien (URL)</label>
        <input id="bgUrl" class="input" placeholder="https://exemple.com/fond.jpg">
      </div>
    </div>
    <div class="hint">Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª ØªØ­ÙØ¸ Ù…Ø­Ù„ÙŠØ§Ù‹ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø² ÙÙ‚Ø·.</div>
    <div style="margin-top:10px;">
      <button class="btn" id="applyBg">Appliquer</button>
      <button class="btn danger" id="clearBg">Supprimer fond</button>
    </div>
  </section>
</main>

<script>
const LS_THEME='ab_theme';

/* ========== Sidebar ========== */
const sidebar=document.getElementById('sidebar');
const overlay=document.getElementById('overlay');
document.getElementById('menuBtn').onclick=()=>{sidebar.classList.add('open');overlay.classList.add('active');}
overlay.onclick=()=>{sidebar.classList.remove('open');overlay.classList.remove('active');}

/* ========== Page navigation ========== */
function showPage(id){
  document.querySelectorAll('main > section').forEach(s=>s.classList.add('hidden'));
  document.getElementById('page-'+id).classList.remove('hidden');
  sidebar.classList.remove('open');overlay.classList.remove('active');
}
document.getElementById('nav-home').onclick=e=>{e.preventDefault();showPage('home');}
document.getElementById('nav-settings').onclick=e=>{e.preventDefault();showPage('settings');}
document.getElementById('nav-theme').onclick=e=>{e.preventDefault();showPage('theme');}
document.getElementById('nav-logout').onclick=e=>{e.preventDefault();location='index.html';}

/* ========== Theme background ========== */
function getTheme(){
  try{return JSON.parse(localStorage.getItem(LS_THEME)||'{}');}catch{return {};}
}
function saveTheme(v){localStorage.setItem(LS_THEME,JSON.stringify(v));}
function applyTheme(){
  const t=getTheme();
  if(t.bg){
    document.body.style.backgroundImage=`url('${t.bg}')`;
    document.body.style.backgroundSize='cover';
    document.body.style.backgroundPosition='center';
  }else{
    document.body.style.backgroundImage='none';
  }
}
document.getElementById('applyBg').onclick=()=>{
  const t=getTheme();
  const file=document.getElementById('bgFile').files[0];
  const url=document.getElementById('bgUrl').value.trim();
  if(file){
    const r=new FileReader();
    r.onload=e=>{
      t.bg=e.target.result;
      saveTheme(t);applyTheme();
      alert("ØªÙ… ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø®Ù„ÙÙŠØ© âœ…");
    };
    r.readAsDataURL(file);
  }else if(url){
    t.bg=url;saveTheme(t);applyTheme();
    alert("ØªÙ… ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø®Ù„ÙÙŠØ© Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø· âœ…");
  }else alert("Ø§Ø®ØªØ± ØµÙˆØ±Ø© Ø£Ùˆ Ø¶Ø¹ Ø±Ø§Ø¨Ø· Ø£ÙˆÙ„Ø§Ù‹.");
};
document.getElementById('clearBg').onclick=()=>{
  const t=getTheme();t.bg=null;saveTheme(t);applyTheme();
  alert("ØªÙ… Ø­Ø°Ù Ø§Ù„Ø®Ù„ÙÙŠØ©.");
};

/* ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
applyTheme();
</script>

</body>
</html>
